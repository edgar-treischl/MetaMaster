<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Be the Master of the Meta Data Universe • MetaMaster</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Lato-0.4.9/font.css" rel="stylesheet">
<link href="deps/Bungee-0.4.9/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Be the Master of the Meta Data Universe">
<meta name="description" content="The package provides a set of functions to extract and manipulate data from LimeSurvey and combine it meta data from other sources.">
<meta property="og:description" content="The package provides a set of functions to extract and manipulate data from LimeSurvey and combine it meta data from other sources.">
<meta property="og:image" content="/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">MetaMaster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Introduction.html">Introduction</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="metamaster">MetaMaster<a class="anchor" aria-label="anchor" href="#metamaster"></a>
</h1>
</div>
<!-- badges: start -->
<!-- badges: end -->
<p>The goal of the MetaMaster package is to create meta data for LimeSurvey which are reproducible, tested, and in consequence error-free. The package provides functions to get the names of the master templates, the data of the master template, and to create new surveys based on a template.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of MetaMaster like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install_local from installs the package and its dependencies</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_local</span><span class="op">(</span><span class="st">"MetaMaster.gz"</span>,</span>
<span>                       dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="test-the-meta-data">Test the meta data<a class="anchor" aria-label="anchor" href="#test-the-meta-data"></a>
</h2>
<p>Test the meta data by running a test. A test run implies that all variables from the LimeSurvey API are matched with the meta data and only the variables that can’t be matched are returned. Thus, a test run creates a list of unmatched variables per master and survey template that will result in an error. First, load the package and run the <code><a href="reference/get_templates.html">get_templates()</a></code> function. It return unique names of survey templates. This information comes from the master to template file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Get the names all unique survey templates</span></span>
<span><span class="co"># templates &lt;- get_templates()</span></span>
<span><span class="co"># head(templates)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">MetaMaster</span><span class="op">)</span></span>
<span><span class="co">#Sys.setenv(R_CONFIG_ACTIVE = "test")</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/Limer_GetMaster.html">Limer_GetMaster</a></span><span class="op">(</span>template <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code></pre></div>
<p>A master template can be used more than once, which is why we start with the survey template and we match it with the master template. The function <code><a href="reference/get_master.html">get_master()</a></code> returns the name of the master template for a survey template. This function also relies on the master to template file. Thus, we need to take care that all mastertemplates are listed in the master to template file and that all survey templates are correctly matched.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#mastername &lt;- get_master(templatename = "tmpl_bfr_allg_gm_elt_00_2022_p1")</span></span>
<span><span class="co">#mastername</span></span></code></pre></div>
<p>Since we know the master template, we can retrieve survey question via the API. The function <code><a href="reference/get_masters.html">get_masters()</a></code> is a wrapper function for these steps. It returns a list of all survey templates and the corresponding master templates.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mastertemplatesList</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_masters.html">get_masters</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#Survey templates</span></span>
<span><span class="co">#head(mastertemplatesList$template)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Master templates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mastertemplatesList</span><span class="op">$</span><span class="va">master</span><span class="op">)</span></span></code></pre></div>
<p>The function <code><a href="reference/get_TemplateDF.html">get_TemplateDF()</a></code> returns question variables (vars) of a given master template.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">master</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/get_TemplateDF.html">get_TemplateDF</a></span><span class="op">(</span>mastername <span class="op">=</span> <span class="st">"master_01_bfr_allg_gm_elt_00_2022_v4"</span><span class="op">)</span></span>
<span><span class="va">master</span></span></code></pre></div>
<p>Internally, it picks the survey ID (<code>sid</code>) from the <code>allMastersLimeSurvey.xlsx</code> file. Make sure this file is up to date. Create a new file with the <code><a href="reference/update_allMastersLimeSurvey.html">update_allMastersLimeSurvey()</a></code> function. The latter runs <code><a href="reference/get_MasterTemplate.html">get_MasterTemplate()</a></code> which returns all masters templates and saves the result as an Excel file.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/get_MasterTemplate.html">get_MasterTemplate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To match the result from the LimeSurvey API, we need the manually created meta data. The function <code><a href="reference/gisela_report.html">gisela_report()</a></code> returns the variable list of a report for a given survey template.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/gisela_report.html">gisela_report</a></span><span class="op">(</span>template <span class="op">=</span> <span class="st">"tmpl_bfr_allg_gm_elt_00_2022_p1"</span><span class="op">)</span></span></code></pre></div>
<p>Finally, there are two wrapper function to create a test run. First, we need to match the results from the API with the meta data. The function <code><a href="reference/joinMetaGisela.html">joinMetaGisela()</a></code> does this. Moreover, the function <code><a href="reference/testrun.html">testrun()</a></code> takes the input of the list of survey templates and master templates and merges the results as a list.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/testrun.html">testrun</a></span><span class="op">(</span>export <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>The latter is wrapper function around <code><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">purrr::map2()</a></code> and <code><a href="reference/joinMetaGisela.html">joinMetaGisela()</a></code>, as the next console shows for the first five survey and master templates.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Join the meta data with the LimeSurvey API for all survey and master templates</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map2.html" class="external-link">map2</a></span><span class="op">(</span><span class="va">mastertemplatesList</span><span class="op">$</span><span class="va">template</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,</span>
<span>            <span class="va">mastertemplatesList</span><span class="op">$</span><span class="va">master</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span>,</span>
<span>            <span class="va">joinMetaGisela</span><span class="op">)</span></span></code></pre></div>
<p>Share the results of the test run with the <code><a href="reference/send_testrun.html">send_testrun()</a></code> function. This function sends the results of the test run via email.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Send the test run</span></span>
<span><span class="fu"><a href="reference/send_testrun.html">send_testrun</a></span><span class="op">(</span>sendto <span class="op">=</span> <span class="st">"john.doe@johndoe.com"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing MetaMaster</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.edgar-treischl.de/" class="external-link">Edgar Treischl</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5627-9125" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://www.edgar-treischl.de/" class="external-link">Edgar Treischl</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
